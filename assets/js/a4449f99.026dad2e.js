(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{146:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return m}));var r=n(1),a=n(8),o=(n(0),n(250)),i=["components"],c={title:"Improving performance"},s={unversionedId:"performance/improving-performance",id:"version-2.0/performance/improving-performance",isDocsHomePage:!1,title:"Improving performance",description:"Redirecting to cached data",source:"@site/versioned_docs/version-2.0/performance/improving-performance.md",slug:"/performance/improving-performance",permalink:"/docs/2.0/performance/improving-performance",editUrl:"https://github.com/kamilkisiela/apollo-angular/edit/master/website/versioned_docs/version-2.0/performance/improving-performance.md",version:"2.0",sidebar:"version-2.0/docs",previous:{title:"Developer tools",permalink:"/docs/2.0/development-and-testing/developer-tools"},next:{title:"Optimistic UI",permalink:"/docs/2.0/performance/optimistic-ui"}},l=[],p={toc:l};function m(e){var t=e.components,n=Object(a.a)(e,i);return Object(o.b)("wrapper",Object(r.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"redirecting-to-cached-data"},"Redirecting to cached data"),Object(o.b)("p",null,"In some cases, a query requests data that already exists in the client cache under a different reference. A very common example of this is when your UI has a list view and a detail view that both use the same data. To avoid re-requesting data that already exists in the cache, see ",Object(o.b)("a",{parentName:"p",href:"/docs/2.0/caching/advanced-topics#cache-redirects-using-field-policy-read-functions"},"Cache redirects using field policy read functions"),"."),Object(o.b)("h1",{id:"prefetching-data"},"Prefetching data"),Object(o.b)("p",null,"One of the easiest ways to make your application's UI feel a lot snappier with Apollo Client is to use prefetching. Prefetching simply means fetching data before it needs to be rendered on the screen, for example by loading all data required for a view as soon as you anticipate that a user will navigate to it."),Object(o.b)("p",null,"In Apollo Client, prefetching is very simple and can be done by running a component's query before rendering."),Object(o.b)("p",null,"GitHunt uses ",Object(o.b)("inlineCode",{parentName:"p"},"Apollo")," and calls ",Object(o.b)("inlineCode",{parentName:"p"},"query")," method as soon as the user hovers over a link to the comments  page.\nWith the data prefetched, the comments page renders immediately, and the user often experiences no delay at all:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-typescript"},"import { Apollo, gql } from 'apollo-angular';\n\n@Component({\n  template: `\n    <a [routerLink]=\"['/', org, repoName]\" (mouseover)=\"prefetchComments(fullName)\">\n      View comments ({{ commentCount }})\n    </a>\n  `\n})\nclass RepoInfoComponent {\n  org: string;\n  fullName: string;\n  repoName: string;\n  entry: any;\n\n  constructor(private apollo: Apollo) {}\n\n  prefetchComments(repoFullName: string) {\n    this.apollo.query({\n      query: commentQuery,\n      variables: { repoName: repoFullName },\n    }).subscribe();\n  }\n}\n")),Object(o.b)("p",null,"There are a lot of different ways to anticipate that the user will end up needing some data in the UI. In addition to using the hover state, here are some other places you can preload data:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"The next step of a multi-step wizard immediately"),Object(o.b)("li",{parentName:"ol"},"The route of a call-to-action button"),Object(o.b)("li",{parentName:"ol"},"All of the data for a sub-area of the application, to make navigating within that area instant")),Object(o.b)("p",null,"If you have some other ideas, please send a PR to this article, and maybe add some more code snippets. A special form of prefetching is ",Object(o.b)("a",{parentName:"p",href:"/docs/2.0/performance/server-side-rendering#store-rehydration"},"store hydration from the server"),", so you might also consider hydrating more data than is actually needed for the first page load to make other interactions faster."))}m.isMDXComponent=!0},250:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},m=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,f=m["".concat(i,".").concat(u)]||m[u]||d[u]||o;return n?a.a.createElement(f,c(c({ref:t},l),{},{components:n})):a.a.createElement(f,c({ref:t},l))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);